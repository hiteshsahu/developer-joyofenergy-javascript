<!DOCTYPE html>
<html>

<head>
    <title>JOI Energy ⚡</title>
    <link rel="shortcut icon" type="image/jpeg"
        href="https://images.pexels.com/photos/577514/pexels-photo-577514.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Armata&display=swap');

        body {
            background: #e0e5ec;
            font-family: 'Armata', sans-serif;
            text-align: center;
            background-image: url('https://www.pngkey.com/png/full/69-698927_best-free-industrail-workers-and-engineers-transparent-blue.png');
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: right bottom;
        }

        li {
            margin: 10px;
        }

        a.api:link {
            color: #0b72bb;
        }

        a.api:visited {
            color: #0b72bb;
        }

        a.api:hover {
            color: #03c991;
        }

        .content {
            width: 500px;
            margin: 20px;
            padding: 15px;
            text-align: start;
            align-items: center;
            margin-left: auto;
            margin-right: auto;
            background-color: #ffffff;
            box-shadow: 10px 10px 5px grey;
        }

        .api-list {
            font-size: 20px;
            color: #676767;
        }
    </style>

</head>

<body>
    <h2>Welcome to JOI Energy REST API ⚡ </h1>
        <div class="content">
            <h3>Available API Routes are:</h3>
            <p id="api-list" />
        </div>
</body>

<script>
    const baseURL = window.location.origin
    const smartMeterId = "smart-meter-0"
    document.getElementById("api-list").innerHTML =
        "<ol>" +
        "<li><a class =\"api\" href=\"#\" onclick=\"return storeReadings();\">Store Readings</a><br/>(/readings/store)</li>" +
        "<li><a class =\"api\" href=" + baseURL + "/readings/read/" + smartMeterId + ">Read Readings</a><br/>(/readings/read/:smartMeterId)</li>" +
        "<li><a class =\"api\" href=" + baseURL + "/price-plans/recommend/" + smartMeterId + ">Recommend Plans</a><br/>(/price-plans/recommend/:smartMeterId)</li>" +
        "<li><a class =\"api\" href=" + baseURL + "/price-plans/compare-all/" + smartMeterId + ">Compare Plans</a><br/>(/price-plans/compare-all/:smartMeterId)</li>" +
        "<ol>"

    async function postData(url = '', data = {}) {
        const response = await fetch(url, {
            method: 'POST',
            mode: 'cors',
            cache: 'no-cache',
            credentials: 'same-origin',
            headers: {
                'Content-Type': 'application/json'
            },
            redirect: 'follow',
            referrerPolicy: 'no-referrer',
            body: JSON.stringify(data)
        });
        // Parse as JSON
        return response.json();
    }

    storeReadings = () => {
        let meaterReadings = {
            "smartMeterId": "smart-meter-0",
            "electricityReadings": [
                { "time": 1606636800, "reading": 0.0503 },
                { "time": 1606636860, "reading": 0.0621 },
                { "time": 1606636920, "reading": 0.0222 },
                { "time": 1606636980, "reading": 0.0423 },
                { "time": 1606637040, "reading": 0.0191 }]
        }

        postData(baseURL + "/readings/store/", meaterReadings)
            .then(response => {
                console.log("Readings Stores! response:" + JSON.stringify(response));
            });
    }

</script>

</html>